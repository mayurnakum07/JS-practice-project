<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Array Resivion</title>
  </head>
  <body>
    <h1 id="demo"></h1>

    <script src="https://cdn.jsdelivr.net/npm/dayjs@1/dayjs.min.js"></script>
    <script>
      const Arr = [
        {
          id: "459be983-e977-4a9d-9f80-ba86581aa080",
          plotData: [
            {
              id: "6581c540-006e-0039-0000-000000000000",
              type: "line",
              name: "BCAG_PSG_Rheine_TBO-Line_Hyper Compressor_HYO_CR01_CHS_P-VT01_P-SEG1-RMS",
              x: [
                "09-11-2023",
                "08-06-2023",
                "09-04-2023",
                "07-24-2023",
                "06-19-2023",
              ],
              y: [0, 0, 0, 0, 0, 0],
              line: {
                width: 1,
                color: "#1f77b4",
              },
              yaxis: "y",
              unit: "m/s²",
              hoverinfo: "none",
              visible: true,
              // Before9: [],
              // After9: [],
            },
            {
              id: "6581c540-006e-0046-0000-000000000000",
              type: "line",
              name: "BCAG_PSG_Rheine_TBO-Line_Hyper Compressor_HYO_CR01_CYL1_HE_P-PT01_SEG1-PTP",
              x: [
                "09-04-2023",
                "08-06-2023",
                "09-11-2023",
                "07-23-2023",
                "06-19-2023",
                "07-25-2023",
              ],
              y: [0, 0, 0, 0, 0, 0],
              line: {
                width: 1,
                color: "#ff7f0e",
              },
              yaxis: "y2",
              unit: "bar a",
              hoverinfo: "none",
              visible: true,
              // Before9: [],
              // After9: [],
            },
          ],
        },
        {
          id: "dfc6be62-750d-4caa-87e8-8662ea25a30f",
          plotData: [
            {
              id: "6581c540-006e-0048-0000-000000000000",
              type: "line",
              name: "BCAG_PSG_Rheine_TBO-Line_Hyper Compressor_HYO_CR01_CYL1_P-PO01X_P-SEG1-PTP",
              x: [
                "08-06-2023",
                "09-11-2023",
                "07-23-2023",
                "07-25-2023",
                "09-04-2023",
              ],
              y: [2.204099655151367],
              line: {
                width: 1,
                color: "#1f77b4",
              },
              yaxis: "y",
              unit: "µm",
              hoverinfo: "none",
              visible: true,
              // Before9: [],
              // After9: [],
            },
            {
              id: "6581c540-006e-004a-0000-000000000000",
              type: "line",
              name: "BCAG_PSG_Rheine_TBO-Line_Hyper Compressor_HYO_CR01_CYL1_P-PO01Y_SEG1-AVG2REF",
              x: ["07-23-2023", "07-25-2023", "06-19-2023"],
              y: [
                1111.137451171875, 1111.137451171875, 1111.137451171875,
                1111.137451171875, 1111.137451171875, 1111.137451171875,
              ],
              line: {
                width: 1,
                color: "#ff7f0e",
              },
              yaxis: "y2",
              unit: "µm2",
              hoverinfo: "none",
              visible: true,
              // Before9: [],
              // After9: [],
            },
            {
              id: "6581c540-006e-0038-0000-000000000000",
              type: "line",
              name: "BCAG_PSG_Rheine_TBO-Line_Hyper Compressor_HYO_CR01_CHS_P-VT01_P-SEG36-RMS S1",
              x: [
                "09-11-2023",
                "08-06-2023",
                "09-04-2023",
                "06-19-2023",
                "07-23-2023",
                "07-25-2023",
              ],
              y: [0, 0, 0, 0, 0, 0],
              line: {
                width: 1,
                color: "#2ca02c",
              },
              yaxis: "y3",
              unit: "m/s1",
              hoverinfo: "none",
              visible: true,
              // Before9: [],
              // After9: [],
            },
            {
              id: "6581c540-006e-0038-0000-000000000000",
              type: "line",
              name: "BCAG_PSG_Rheine_TBO-Line_Hyper Compressor_HYO_CR01_CHS_P-VT01_P-SEG36-RMS S2",
              x: [
                "07-23-2023",
                "09-11-2023",
                "06-19-2023",
                "08-06-2023",
                "09-25-2023",
              ],
              y: [0, 0, 0, 0, 0, 0],
              line: {
                width: 1,
                color: "#d62728",
              },
              yaxis: "y3",
              unit: "m/s2",
              hoverinfo: "none",
              visible: true,
              // Before9: [],
              // After9: [],
            },
          ],
        },
      ];

      const fixDate = dayjs("07-24-2023");
      const formatDate = fixDate.format("DD-MM-YYYY");
      console.log("formatDate", formatDate);

      const Arr2 = Arr.map((ele1) => {
        // console.log(ele1);
        return {
          plotData: ele1.plotData.map((ele2) => {
            return {
              x: ele2.x.filter((ele3) => {
                if (fixDate.isBefore(ele3)) {
                  return ele3;
                } else {
                  null;
                }
              }),
            };
          }),
        };
      });
      console.log("Array 2", Arr2);

      const Arr3 = Arr.map((ele1) => {
        return {
          ...ele1,
          plotData: ele1.plotData.map((ele2) => {
            return {
              ...ele2,
              x: ele2.x.filter((ele3) => {
                if (fixDate.isBefore(ele3)) {
                  return ele3;
                } else {
                  null;
                }
              }),
            };
          }),
        };
      });

      console.log("Array 3", Arr3);

      // const Arr4 = Arr.map((ele1) => {
      //   return {
      //     ...ele1,
      //     plotData: ele1.plotData.map((ele2) => {
      //       return {
      //         ...ele2,
      //         x: ele2.x.map((ele3) => {
      //           if (fixDate.isBefore(ele3)) {
      //             After9: ele2.After9.push(ele3);
      //           } else {
      //             Before: ele2.Before9.push(ele3);
      //           }
      //           return ele3;
      //           x;
      //         }),
      //       };
      //     }),
      //   };
      // });

      // console.log("Array 4", Arr4);

      const Arr5 = Arr.map((ele1) => {
        return {
          ...ele1,
          plotData: ele1.plotData.map((ele2) => {
            ele2.Before9 = [];
            return {
              ...ele2,
              x: ele2.x.filter((ele3) => {
                if (fixDate.isBefore(ele3)) {
                  return ele3;
                } else {
                  ele2.Before9.push(ele3);
                }
              }),
            };
          }),
        };
      });

      console.log("Array 5", Arr5);
    </script>
  </body>
</html>

<!--  const newArr = Arr.map((e) => {
    console.log("plot", e.plotData);
    return {
      unit: e.plotData.map((data) => data.unit),
    };
  });

  console.log(newArr); -->
